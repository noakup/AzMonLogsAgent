{
  "type": "Microsoft.Resources/AzureActivity",
  "displayName": "Azure activity Log V2",
  "description": "Entries from the Azure Activity log that provides insight into any subscription, management group and tenant level events that have occurred in Azure.",
  "simplifiedSchemaVersion": "3",
  "icmTeam": "ApplicationInsights/Kusto-LogAnalyticsBackend",
  "tags": {},
  "properties": {},
  "relatedTables": [],
  "relatedFunctions": [],
  "tables": [
    {
      "name": "AzureActivityV2",
      "description": "Azure activity logs.",
      "categories": [ "audit" ],
      "dataTypeId": "MICROSOFT_AZUREACTIVITYV2",
      "isHidden": true,
      "artifactVersion": 13,
      "tableState": "Production",
      "isTroubleshootingAllowed": false,
      "isChangeColumnInternalNameAllowed": true,
      "input": [
        {
          "name": "time",
          "type": "DateTime"
        },
        {
          "name": "hoboWorkspaceId",
          "type": "string"
        },
        {
          "name": "operationName",
          "type": "String"
        },
        {
          "name": "category",
          "type": "String"
        },
        {
          "name": "properties",
          "type": "String"
        },
        {
          "name": "properties_backcompat",
          "type": "String"
        },
        {
          "name": "legacyProperties",
          "type": "String"
        },
        {
          "name": "eventTimestamp",
          "type": "DateTime"
        },
        {
          "name": "level",
          "type": "String"
        },
        {
          "name": "channels",
          "type": "String"
        },
        {
          "name": "resourceId",
          "type": "String"
        },
        {
          "name": "resourceProviderName",
          "type": "String"
        },
        {
          "name": "correlationId",
          "type": "String"
        },
        {
          "name": "eventName",
          "type": "String"
        },
        {
          "name": "callerIpAddress",
          "type": "String"
        },
        {
          "name": "resultType",
          "type": "String"
        },
        {
          "name": "resultDescription",
          "type": "String"
        },
        {
          "name": "identity",
          "type": "String"
        },
        {
          "name": "eventTimeTicks",
          "type": "Double"
        },
        {
          "name": "rawLog",
          "type": "String"
        }
      ],
      "transformFilePath": "KQL/AzureActivityV2Query.kql",
      "columns": [
        {
          "name": "MoboTenantId",
          "description": "ID of the activity logs workspace that stores this record.",
          "type": "Guid",
          "isDefaultDisplay": true
        },
        {
          "name": "TimeGenerated",
          "description": "Timestamp when the event was generated by the Azure service processing the request.",
          "type": "DateTime",
          "isDefaultDisplay": true
        },
        {
          "name": "SourceSystem",
          "description": "Azure is used always for AzureActivity.",
          "type": "String",
          "isDefaultDisplay": true

        },
        {
          "name": "CallerIpAddress",
          "description": "IP address of the user who has performed the operation UPN claim or SPN claim based on availability.",
          "type": "String",
          "isDefaultDisplay": true,
          "dataTypeHint": "IP"
        },
        {
          "name": "CategoryValue",
          "description": "Category of the activity log e.g. Administrative, Policy, Security.",
          "type": "String",
          "isDefaultDisplay": true
        },
        {
          "name": "CorrelationId",
          "description": "Usually a GUID in the string format. Events that share a correlationId belong to the same uber action.",
          "type": "String",
          "isDefaultDisplay": true
        },
        {
          "name": "Authorization",
          "description": "Blob of RBAC properties of the event. Usually includes the �action�, �role� and �scope� properties.",
          "type": "String",
          "isDefaultDisplay": true
        },
        {
          "name": "Claims",
          "description": "The JWT token used by Active Directory to authenticate the user or application to perform this operation in Resource Manager.",
          "type": "String",
          "isDefaultDisplay": true
        },
        {
          "name": "Level",
          "description": "Level of the event. One of the following values: Critical, Error, Warning, Informational and Verbose.",
          "type": "String",
          "isDefaultDisplay": true
        },
        {
          "name": "OperationNameValue",
          "description": "Identifier of the operation e.g. Microsoft.Storage/storageAccounts/listAccountSas/action.",
          "type": "String",
          "isDefaultDisplay": true
        },
        {
          "name": "Properties",
          "description": "Set of <Key Value> pairs (i.e. Dictionary) describing the details of the event.",
          "type": "String",
          "isDefaultDisplay": true
        },
        {
          "name": "PropertiesBackCompat",
          "description": "Set of <Key Value> pairs (i.e. Dictionary) describing the details of the event. Used for back compat with legacy activity logs",
          "type": "String",
          "isDefaultDisplay": true
        },
        {
          "name": "Caller",
          "description": "Unique identifier of the caller.",
          "type": "String",
          "isDefaultDisplay": true
        },
        {
          "name": "EventDataId",
          "description": "Unique identifier of an event.",
          "type": "String",
          "isDefaultDisplay": true
        },
        {
          "name": "EventSubmissionTimestamp",
          "description": "Timestamp when the event became available for querying.",
          "type": "DateTime",
          "isDefaultDisplay": true
        },
        {
          "name": "HTTPRequest",
          "description": "Blob describing the Http Request. Usually includes the �clientRequestId�, �clientIpAddress� and �method� (HTTP method. For example, PUT).",
          "type": "String",
          "isDefaultDisplay": true
        },
        {
          "name": "OperationId",
          "description": "Unique identifier of the operation.",
          "type": "String",
          "isDefaultDisplay": true
        },
        {
          "name": "AzureResourceGroup",
          "description": "Resource group name of the impacted resource.",
          "type": "String",
          "isDefaultDisplay": true
        },
        {
          "name": "ResourceProviderValue",
          "description": "Id of the resource provider for the impacted resource - e.g. Microsoft.Storage.",
          "type": "String",
          "isDefaultDisplay": true
        },
        {
          "name": "ResourceTypeValue",
          "description": "Id of the resource type for the impacted resource - e.g. Microsoft.Network/networksecuritygroups/securityrules.",
          "type": "String",
          "isDefaultDisplay": true
        },
        {
          "name": "EventName",
          "description": "The name of event - e.g.: BeginRequest, EndRequest, Update, Delete",
          "type": "String",
          "isDefaultDisplay": true
        },
        {
          "name": "Channel",
          "description": "OPERATION is used always for AzureActivity.",
          "type": "String",
          "isDefaultDisplay": true
        },
        {
          "name": "ActivityStatusValue",
          "description": "Status of the operation in display-friendly format. Common values include Started, In Progress, Succeeded, Failed, Active, Resolved.",
          "type": "String",
          "isDefaultDisplay": true
        },
        {
          "name": "ActivitySubstatusValue",
          "description": "Substatus of the operation in display-friendly format. E.g. OK (HTTP Status Code: 200).",
          "type": "String",
          "isDefaultDisplay": true
        },
        {
          "name": "Hierarchy",
          "description": "Management group hierarchy of the management group or subscription that event belongs to.",
          "type": "String",
          "isDefaultDisplay": true
        },
        {
          "transformName": "AzureSubscriptionId",
          "physicalName": "AzureSubscriptionIdString",
          "logicalName": "AzureSubscriptionId",
          "description": "Subscription ID of the impacted resource.",
          "type": "String",
          "isDefaultDisplay": true
        },
        {
          "name": "AzureTenantId",
          "description": "The Azure tenant ID of the impacted resource.",
          "type": "String",
          "isDefaultDisplay": true
        },
        {
          "name": "AzureResourceId",
          "description": "Resource ID of the impacted resource.",
          "type": "String",
          "isDefaultDisplay": true
        },
        {
          "name": "Description",
          "description": "The description of the operation",
          "type": "String",
          "isDefaultDisplay": true
        },
        {
          "name": "Misc",
          "description": "Miscellaneous column for internal use.",
          "type": "Dynamic",
          "isDefaultDisplay": true
        }
      ],
      "sampleInputRecordsFilePath": "SampleInputRecords/AzureActivityV2Samples.json",
      "isResourceCentric": true,
      "intelligencePacks": [
        "LogManagement"
      ],
      "tags": {},
      "properties": {}
    }
  ],
  "functions": [],
  "queries": []
}