source 
| where logName has 'container.googleapis.com%2Fhpa-controller'
| extend TimeGenerated = timestamp,
InsertId = tostring(insertId),
LogName = tostring(logName),
Labels = todynamic(labels),
Message = tostring(jsonPayload.message),
Severity = tostring(severity),
SourceFile = iff(isnotempty(todynamic(sourceLocation)), tostring(sourceLocation.file), ''),
SourceLine = iff(isnotempty(todynamic(sourceLocation)), tostring(sourceLocation.line), ''),
ReceiveTimestamp = receiveTimestamp,
ClusterName = tostring(resource.labels.cluster_name),
ComponentLocation = tostring(resource.labels.component_location),
ComponentName = tostring(resource.labels.component_name),
Location = tostring(resource.labels.location),
ProjectID = tostring(resource.labels.project_id),
ComputeResourceName = tostring(labels['compute.googleapis.com/resource_name']),
VMName = tostring(jsonPayload.instance.vm_name),
Zone = tostring(jsonPayload.instance.zone),
ActuationLatencySeconds = todouble(jsonPayload.finalRecommendation.actuationLatencySeconds),
ActuationTime = todatetime(jsonPayload.finalRecommendation.actuationTime),
ConfiguredSize = toint(jsonPayload.finalRecommendation.configuredSize),
HPA = tostring(jsonPayload.finalRecommendation.hpa),
LeadingMetricIndex = toint(jsonPayload.finalRecommendation.leadingMetricIndex),
Replicas = toint(jsonPayload.finalRecommendation.replicas),
StartTime = todatetime(jsonPayload.finalRecommendation.startTime),
TargetRefKind = tostring(jsonPayload.finalRecommendation.targetRef["kind"]),
TargetRefAPIVersion = tostring(jsonPayload.finalRecommendation.targetRef.apiVersion),
TargetRefName = tostring(jsonPayload.finalRecommendation.targetRef.name),
TopLevelLimit = tostring(jsonPayload.finalRecommendation.topLevelLimit),
TopLevelOverride = tostring(jsonPayload.finalRecommendation.topLevelOverride)
| project 
    TimeGenerated,
    InsertId,
    LogName,
    Labels,
    Message,
    Severity,
    SourceFile,
    SourceLine,
    ReceiveTimestamp,
    ClusterName,
    ComponentLocation,
    ComponentName,
    Location,
    ProjectID,
    ComputeResourceName,
    VMName,
    Zone,
    ActuationLatencySeconds,
    ActuationTime,
    ConfiguredSize,
    HPA,
    LeadingMetricIndex,
    Replicas,
    StartTime,
    TargetRefKind,
    TargetRefAPIVersion,
    TargetRefName,
    TopLevelLimit,
    TopLevelOverride