source
| extend properties = parse_json(properties)
| project 
    TimeGenerated = todatetime(["time"]),
    Location = location,
    RequestId = tostring(properties.requestId),
    OperationId = tostring(properties.operationId),
    ClientRequestId = tostring(properties.clientRequestId),
    ApiVersion = tostring(properties.apiVersion),
    RequestMethod = tostring(properties.requestMethod),
    ResponseStatusCode = toint(properties.responseStatusCode),
    AadTenantId = tenantId,
    IPAddress = tostring(properties.ipAddress),
    UserAgent = tostring(properties.userAgent),
    RequestUri = tostring(properties.requestUri),
    DurationMs = toint(properties.durationMs),
    ResponseSizeBytes = toint(properties.responseSizeBytes),
    SignInActivityId = tostring(properties.signInActivityId),
    Roles = tostring(properties.roles),
    SessionId = tostring(properties.C_Sid),
    DeviceId = tostring(properties.C_DeviceId),
    UniqueTokenId = tostring(properties.C_Uti),
    TokenIssuedAt = todatetime(properties.tokenIssuedAt),
    AppId = tostring(properties.appId),
    UserId = tostring(properties.userId),
    ServicePrincipalId = tostring(properties.servicePrincipalId),
    Scopes = tostring(properties.scopes),
    IdentityProvider = tostring(properties.identityProvider),
    ClientAuthMethod = toint(properties.clientAuthMethod),
    Wids = tostring(properties.wids),
    ATContent = tostring(properties.atContent),
    ATContentH = tostring(properties.atContentH),
    ATContentP = tostring(properties.atContentP)